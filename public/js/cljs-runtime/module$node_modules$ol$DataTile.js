shadow$provide.module$node_modules$ol$DataTile = function(global, require, module, exports) {
  function asImageLike(data) {
    return data instanceof Image || data instanceof HTMLCanvasElement || data instanceof HTMLVideoElement || data instanceof ImageBitmap ? data : null;
  }
  function asArrayLike(data) {
    return data instanceof Uint8Array || data instanceof Uint8ClampedArray || data instanceof Float32Array || data instanceof DataView ? data : null;
  }
  function toArray(image) {
    sharedContext || (sharedContext = (0,require$_DOT__SLASH_dom_DOT_js.createCanvasContext2D)(image.width, image.height, void 0, {willReadFrequently:!0}));
    const canvas = sharedContext.canvas, width = image.width;
    canvas.width !== width && (canvas.width = width);
    const height = image.height;
    canvas.height !== height && (canvas.height = height);
    sharedContext.clearRect(0, 0, width, height);
    sharedContext.drawImage(image, 0, 0);
    return sharedContext.getImageData(0, 0, width, height).data;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, asArrayLike:{enumerable:!0, get:function() {
    return asArrayLike;
  }}, asImageLike:{enumerable:!0, get:function() {
    return asImageLike;
  }}, default:{enumerable:!0, get:function() {
    return $$default;
  }}, disposedError:{enumerable:!0, get:function() {
    return disposedError;
  }}, toArray:{enumerable:!0, get:function() {
    return toArray;
  }}});
  global = require("module$node_modules$ol$Tile");
  module = require("module$node_modules$ol$TileState");
  var require$_DOT__SLASH_dom_DOT_js = require("module$node_modules$ol$dom"), default$$require$_DOT__SLASH_TileState_DOT_js = require.esmDefault(module);
  require = require.esmDefault(global);
  const disposedError = Error("disposed");
  let sharedContext = null;
  const defaultSize = [256, 256];
  class DataTile extends require.default {
    constructor(options) {
      super(options.tileCoord, default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE, {transition:options.transition, interpolate:options.interpolate});
      this.loader_ = options.loader;
      this.error_ = this.data_ = null;
      this.size_ = options.size || null;
      this.controller_ = options.controller || null;
    }
    getSize() {
      if (this.size_) {
        return this.size_;
      }
      const imageData = asImageLike(this.data_);
      return imageData ? [imageData.width, imageData.height] : defaultSize;
    }
    getData() {
      return this.data_;
    }
    getError() {
      return this.error_;
    }
    load() {
      if (this.state === default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE || this.state === default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR) {
        this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADING;
        this.changed();
        var self = this;
        this.loader_().then(function(data) {
          self.data_ = data;
          self.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED;
          self.changed();
        }).catch(function(error) {
          self.error_ = error;
          self.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR;
          self.changed();
        });
      }
    }
    disposeInternal() {
      this.controller_ && (this.controller_.abort(disposedError), this.controller_ = null);
      super.disposeInternal();
    }
  }
  const $$default = DataTile;
};

//# sourceMappingURL=module$node_modules$ol$DataTile.js.map
