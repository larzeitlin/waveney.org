{
"version":3,
"file":"module$node_modules$ol$renderer$Composite.js",
"lineCount":81,
"mappings":"AAAAA,cAAA,CAAA,yCAAA,GAA8D,QAAQ,CAACC,MAAD,EAAQC,OAAR,EAAgBC,MAAhB,EAAuBC,OAAvB,CAAgC;AACtGC,QAAOC,CAAAA,gBAAP,CAAwBF,OAAxB,EAAiC,CAACG,WAAW,CAACC,WAAW,CAAA,CAAZ,EAAkBC,MAAM,CAAA,CAAxB,CAAZ,EAA2CC,QAAQ,CAACF,WAAW,CAAA,CAAZ,EAAkBG,IAAIA,QAAQ,EAAG;AACnH,WAAOC,SAAP;AADmH,GAAjC,CAAnD,CAAjC,CAAA;AAGA,MAAIC,kDAAkDX,OAAA,CAAQ,wCAAR,CAAtD,EACIY,sCAAsCZ,OAAA,CAAQ,4BAAR,CAD1C,EAEIa,sCAAsCb,OAAA,CAAQ,4BAAR,CAF1C,EAGIc,yCAAyCd,OAAA,CAAQ,+BAAR,CAH7C;AAIIe,QAAAA,GAAyDf,OAAA,CAAQ,yCAAR,CAAzDe;AACJ,MAAIC,oDAAoDhB,OAAA,CAAQ,oCAAR,CAAxD;AACIiB,QAAAA,GAAqDjB,OAAA,CAAQ,qCAAR,CAArDiB;AACAC,SAAAA,GAAyDlB,OAAA,CAAQ,yCAAR,CAAzDkB;AACJ,MAAIC,sDAAsDnB,OAAA,CAAQ,sCAAR,CAA1D,EACIoB,iCAAiCpB,OAAA,CAAQ,qCAAR,CADrC,EAEIqB,2DAA2DrB,OAAQsB,CAAAA,UAAR,CAAmBX,+CAAnB,CAF/D;AAGIY,iDAAAA,GAA0CvB,OAAQsB,CAAAA,UAAR,CAAmBF,8BAAnB,CAA1CG;AACJ,MAAIC,kEAAkExB,OAAQsB,CAAAA,UAAR,CAAmBJ,OAAnB,CAAtE,EACIO,8DAA8DzB,OAAQsB,CAAAA,UAAR,CAAmBL,MAAnB,CADlE,EAEIS,kEAAkE1B,OAAQsB,CAAAA,UAAR,CAAmBP,MAAnB,CAFtE;AAGA,OAAMY,qBAAN,QAAmCJ,gDAAwCf,CAAAA,OAA3E;AACEoB,eAAW,CAACC,GAAD,CAAM;AACf,WAAA,CAAMA,GAAN,CAAA;AACA,UAAKC,CAAAA,sBAAL,GAA8B,GAAGhB,sCAAuCiB,CAAAA,MAA1C,EAAkDZ,mDAAoDa,CAAAA,YAAtG,EAAoHX,wDAAyDb,CAAAA,OAAQyB,CAAAA,cAArL,EAAqMJ,GAAIK,CAAAA,UAAzM,EAAqNL,GAArN,CAA9B;AACA,UAAKM,CAAAA,QAAL,GAAgBC,QAASC,CAAAA,aAAT,CAAuB,KAAvB,CAAhB;AACA,YAAMC,QAAQ,IAAKH,CAAAA,QAASG,CAAAA,KAA5B;AACAA,WAAMC,CAAAA,QAAN,GAAiB,UAAjB;AACAD,WAAME,CAAAA,KAAN,GAAc,MAAd;AACAF,WAAMG,CAAAA,MAAN,GAAe,MAAf;AACAH,WAAMI,CAAAA,MAAN,GAAe,GAAf;AACA,UAAKP,CAAAA,QAASQ,CAAAA,SAAd,GAA0B/B,mCAAoCgC,CAAAA,kBAA9D,GAAmF,YAAnF;AACMC,SAAAA,GAAYhB,GAAIiB,CAAAA,WAAJ,EAAZD;AACNA,SAAUE,CAAAA,YAAV,CAAuB,IAAKZ,CAAAA,QAA5B,EAAsCU,GAAUG,CAAAA,UAAhD,IAA8D,IAA9D,CAAA;AACA,UAAKC,CAAAA,SAAL,GAAiB,EAAjB;AACA,UAAKC,CAAAA,gBAAL,GAAwB,CAAA,CAAxB;AAbe;AAejBC,uBAAmB,CAACC,IAAD,EAAOC,UAAP,CAAmB;AACpC,YAAMxB,MAAM,IAAKyB,CAAAA,MAAL,EAAZ;AACIzB,SAAI0B,CAAAA,WAAJ,CAAgBH,IAAhB,CAAJ,KACQI,IACN,GADc,IAAI/B,2DAA4DjB,CAAAA,OAAhE,CAAwE4C,IAAxE,EAA8EK,IAAAA,EAA9E,EAAyFJ,UAAzF,CACd,EAAAxB,GAAI6B,CAAAA,aAAJ,CAAkBF,IAAlB,CAFF;AAFoC;AAOtCG,mBAAe,EAAG;AAChB,SAAG7C,sCAAuC8C,CAAAA,aAA1C,EAAyD,IAAK9B,CAAAA,sBAA9D,CAAA;AACA,UAAKK,CAAAA,QAAS0B,CAAAA,MAAd,EAAA;AACA,WAAMF,CAAAA,eAAN,EAAA;AAHgB;AAKlBG,eAAW,CAACT,UAAD,CAAa;AACtB,UAAKA,UAAL,CAAA;AAOA,YAAKU,CAAAA,mBAAL,CAAyBV,UAAzB,CAAA;AACA,YAAKF,CAAAA,mBAAL,CAAyB3B,+DAAgEhB,CAAAA,OAAQwD,CAAAA,UAAjG,EAA6GX,UAA7G,CAAA;AACA,YAAMY,mBAAmBZ,UAAWY,CAAAA,gBAAiBC,CAAAA,IAA5B,CAAiC,CAACC,CAAD,EAAIC,CAAJ,CAAA,IAAUD,CAAEzB,CAAAA,MAAZ,GAAqB0B,CAAE1B,CAAAA,MAAxD,CAAzB;AACkBuB,wBAAiBI,CAAAA,IAAjBC,CAAsBC,UAAA,IAAcA,UAAWC,CAAAA,KAAzB,YAA0C9C,+DAAgElB,CAAAA,OAA1G,IAAqH+D,UAAWC,CAAAA,KAAMC,CAAAA,YAAjB,EAA3IH,CAClB,KACEjB,UAAWiB,CAAAA,SADb,GACyB,EADzB;AAGA,YAAMI,YAAYrB,UAAWqB,CAAAA,SAA7B;AACA,YAAKzB,CAAAA,SAAU0B,CAAAA,MAAf,GAAwB,CAAxB;AACA,YAAMC,sBAAsB,EAA5B,EACIC,kBAAkB,IADtB;AAEA,aAAK,IAAIC,IAAI,CAAR,EAAWC,KAAKd,gBAAiBU,CAAAA,MAAtC,EAA8CG,CAA9C,GAAkDC,EAAlD,EAAsD,EAAED,CAAxD,CAA2D;AACzD,gBAAMP,aAAaN,gBAAA,CAAiBa,CAAjB,CAAnB;AACAzB,oBAAW2B,CAAAA,UAAX,GAAwBF,CAAxB;AACA,cAAMN,QAAQD,UAAWC,CAAAA,KAAzB;AACA,gBAAMS,cAAcT,KAAMU,CAAAA,cAAN,EAApB;AACA,cAAI,CAAC,GAAGlE,iDAAkDmE,CAAAA,MAArD,EAA6DZ,UAA7D,EAAyEG,SAAzE,CAAL,IAA2G,OAA3G,IAA4FO,WAA5F,IAAqI,WAArI,IAAsHA,WAAtH;AACET,iBAAMY,CAAAA,QAAN,EAAA;AADF;AAKA,gBADMC,KACN,GADgBb,KAAMc,CAAAA,MAAN,CAAajC,UAAb,EAAyBwB,eAAzB,CAChB;AAGIQ,mBAIJ,KAJgBR,eAIhB,KAHE,IAAK5B,CAAAA,SAAUsC,CAAAA,IAAf,CAAoBF,KAApB,CACA,EAAAR,eAAA,GAAkBQ,KAEpB,GAAAT,mBAAoBW,CAAAA,IAApB,CAAyBhB,UAAzB,CAAA;AAPA;AALA;AALyD;AAmB3D,YAAKD,CAAAA,SAAL,CAAejB,UAAf,EAA2BuB,mBAA3B,CAAA;AACA,WAAG/D,mCAAoC2E,CAAAA,eAAvC,EAAwD,IAAKrD,CAAAA,QAA7D,EAAuE,IAAKc,CAAAA,SAA5E,CAAA;AACA,YAAKE,CAAAA,mBAAL,CAAyB3B,+DAAgEhB,CAAAA,OAAQiF,CAAAA,WAAjG,EAA8GpC,UAA9G,CAAA;AACK,YAAKH,CAAAA,gBAAV,KACE,IAAKf,CAAAA,QAASG,CAAAA,KAAMoD,CAAAA,OACpB,GAD8B,EAC9B,EAAA,IAAKxC,CAAAA,gBAAL,GAAwB,CAAA,CAF1B;AAIA,YAAKyC,CAAAA,uBAAL,CAA6BtC,UAA7B,CAAA;AA5CA,OAAA;AACM,YAAKH,CAAAA,gBAAT,KACE,IAAKf,CAAAA,QAASG,CAAAA,KAAMoD,CAAAA,OACpB,GAD8B,MAC9B,EAAA,IAAKxC,CAAAA,gBAAL,GAAwB,CAAA,CAF1B;AADF;AADsB;AA+CxBoB,aAAS,CAACjB,UAAD,EAAauC,WAAb,CAA0B;AACjC,UAAKvC,UAAWiB,CAAAA,SAAhB,CAAA;AAGA,aAAK,IAAIQ,IAAIc,WAAYjB,CAAAA,MAAhBG,GAAyB,CAAlC,EAA0C,CAA1C,IAAqCA,CAArC,EAA6C,EAAEA,CAA/C,CAAkD;AAChD,gBAAMP,aAAaqB,WAAA,CAAYd,CAAZ,CAAnB,EACMN,QAAQD,UAAWC,CAAAA,KADzB;AAEIA,eAAMC,CAAAA,YAAN,EAAJ,IACED,KAAMqB,CAAAA,eAAN,CAAsBxC,UAAtB,EAAkCkB,UAAlC,CADF;AAHgD;AAOlDqB,mBAAYE,CAAAA,OAAZ,CAAoBvB,UAAA,IAAcA,UAAWC,CAAAA,KAAMuB,CAAAA,cAAjB,CAAgC1C,UAAhC,CAAlC,CAAA;AAVA;AADiC;AA3ErC;AAyFA,QAAM3C,YAAYiB,oBAAlB;AA5GsG,CAAtG;;",
"sources":["node_modules/ol/renderer/Composite.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$renderer$Composite\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}});\nvar require$_DOT__DOT__SLASH_ObjectEventType_DOT_js = require(\"../ObjectEventType.js\");\nvar require$_DOT__DOT__SLASH_css_DOT_js = require(\"../css.js\");\nvar require$_DOT__DOT__SLASH_dom_DOT_js = require(\"../dom.js\");\nvar require$_DOT__DOT__SLASH_events_DOT_js = require(\"../events.js\");\nvar require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js = require(\"../layer/BaseVector.js\");\nvar require$_DOT__DOT__SLASH_layer_SLASH_Layer_DOT_js = require(\"../layer/Layer.js\");\nvar require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js = require(\"../render/Event.js\");\nvar require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js = require(\"../render/EventType.js\");\nvar require$_DOT__DOT__SLASH_render_SLASH_canvas_DOT_js = require(\"../render/canvas.js\");\nvar require$_DOT__SLASH_Map_DOT_js = require(\"./Map.js\");\nvar default$$require$_DOT__DOT__SLASH_ObjectEventType_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_ObjectEventType_DOT_js);\nvar default$$require$_DOT__SLASH_Map_DOT_js = require.esmDefault(require$_DOT__SLASH_Map_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js);\nclass CompositeMapRenderer extends default$$require$_DOT__SLASH_Map_DOT_js.default {\n  constructor(map) {\n    super(map);\n    this.fontChangeListenerKey_ = (0,require$_DOT__DOT__SLASH_events_DOT_js.listen)(require$_DOT__DOT__SLASH_render_SLASH_canvas_DOT_js.checkedFonts, default$$require$_DOT__DOT__SLASH_ObjectEventType_DOT_js.default.PROPERTYCHANGE, map.redrawText, map,);\n    this.element_ = document.createElement(\"div\");\n    const style = this.element_.style;\n    style.position = \"absolute\";\n    style.width = \"100%\";\n    style.height = \"100%\";\n    style.zIndex = \"0\";\n    this.element_.className = require$_DOT__DOT__SLASH_css_DOT_js.CLASS_UNSELECTABLE + \" ol-layers\";\n    const container = map.getViewport();\n    container.insertBefore(this.element_, container.firstChild || null);\n    this.children_ = [];\n    this.renderedVisible_ = true;\n  }\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    if (map.hasListener(type)) {\n      const event = new default$$require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js.default(type, undefined, frameState);\n      map.dispatchEvent(event);\n    }\n  }\n  disposeInternal() {\n    (0,require$_DOT__DOT__SLASH_events_DOT_js.unlistenByKey)(this.fontChangeListenerKey_);\n    this.element_.remove();\n    super.disposeInternal();\n  }\n  renderFrame(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element_.style.display = \"none\";\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n    this.calculateMatrices2D(frameState);\n    this.dispatchRenderEvent(default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js.default.PRECOMPOSE, frameState);\n    const layerStatesArray = frameState.layerStatesArray.sort((a, b) => a.zIndex - b.zIndex,);\n    const declutter = layerStatesArray.some(layerState => layerState.layer instanceof default$$require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js.default && layerState.layer.getDeclutter(),);\n    if (declutter) {\n      frameState.declutter = {};\n    }\n    const viewState = frameState.viewState;\n    this.children_.length = 0;\n    const renderedLayerStates = [];\n    let previousElement = null;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      frameState.layerIndex = i;\n      const layer = layerState.layer;\n      const sourceState = layer.getSourceState();\n      if (!(0,require$_DOT__DOT__SLASH_layer_SLASH_Layer_DOT_js.inView)(layerState, viewState) || sourceState != \"ready\" && sourceState != \"undefined\") {\n        layer.unrender();\n        continue;\n      }\n      const element = layer.render(frameState, previousElement);\n      if (!element) {\n        continue;\n      }\n      if (element !== previousElement) {\n        this.children_.push(element);\n        previousElement = element;\n      }\n      renderedLayerStates.push(layerState);\n    }\n    this.declutter(frameState, renderedLayerStates);\n    (0,require$_DOT__DOT__SLASH_dom_DOT_js.replaceChildren)(this.element_, this.children_);\n    this.dispatchRenderEvent(default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js.default.POSTCOMPOSE, frameState);\n    if (!this.renderedVisible_) {\n      this.element_.style.display = \"\";\n      this.renderedVisible_ = true;\n    }\n    this.scheduleExpireIconCache(frameState);\n  }\n  declutter(frameState, layerStates) {\n    if (!frameState.declutter) {\n      return;\n    }\n    for (let i = layerStates.length - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (layer.getDeclutter()) {\n        layer.renderDeclutter(frameState, layerState);\n      }\n    }\n    layerStates.forEach(layerState => layerState.layer.renderDeferred(frameState),);\n  }\n}\nconst $$default = CompositeMapRenderer;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__DOT__SLASH_ObjectEventType_DOT_js","require$_DOT__DOT__SLASH_css_DOT_js","require$_DOT__DOT__SLASH_dom_DOT_js","require$_DOT__DOT__SLASH_events_DOT_js","require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js","require$_DOT__DOT__SLASH_layer_SLASH_Layer_DOT_js","require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js","require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js","require$_DOT__DOT__SLASH_render_SLASH_canvas_DOT_js","require$_DOT__SLASH_Map_DOT_js","default$$require$_DOT__DOT__SLASH_ObjectEventType_DOT_js","esmDefault","default$$require$_DOT__SLASH_Map_DOT_js","default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js","default$$require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js","default$$require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js","CompositeMapRenderer","constructor","map","fontChangeListenerKey_","listen","checkedFonts","PROPERTYCHANGE","redrawText","element_","document","createElement","style","position","width","height","zIndex","className","CLASS_UNSELECTABLE","container","getViewport","insertBefore","firstChild","children_","renderedVisible_","dispatchRenderEvent","type","frameState","getMap","hasListener","event","undefined","dispatchEvent","disposeInternal","unlistenByKey","remove","renderFrame","calculateMatrices2D","PRECOMPOSE","layerStatesArray","sort","a","b","some","declutter","layerState","layer","getDeclutter","viewState","length","renderedLayerStates","previousElement","i","ii","layerIndex","sourceState","getSourceState","inView","unrender","element","render","push","replaceChildren","POSTCOMPOSE","display","scheduleExpireIconCache","layerStates","renderDeclutter","forEach","renderDeferred"]
}
