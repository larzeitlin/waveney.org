shadow$provide.module$node_modules$ol$ImageTile = function(global, require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, default:{enumerable:!0, get:function() {
    return $$default;
  }}});
  var require$_DOT__SLASH_Image_DOT_js = require("module$node_modules$ol$Image");
  global = require("module$node_modules$ol$Tile");
  module = require("module$node_modules$ol$TileState");
  var require$_DOT__SLASH_dom_DOT_js = require("module$node_modules$ol$dom"), default$$require$_DOT__SLASH_TileState_DOT_js = require.esmDefault(module);
  require = require.esmDefault(global);
  class ImageTile extends require.default {
    constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {
      super(tileCoord, state, options);
      this.crossOrigin_ = crossOrigin;
      this.key = this.src_ = src;
      this.image_ = new Image();
      null !== crossOrigin && (this.image_.crossOrigin = crossOrigin);
      this.unlisten_ = null;
      this.tileLoadFunction_ = tileLoadFunction;
    }
    getImage() {
      return this.image_;
    }
    setImage(element) {
      this.image_ = element;
      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED;
      this.unlistenImage_();
      this.changed();
    }
    handleImageError_() {
      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR;
      this.unlistenImage_();
      const ctx = (0,require$_DOT__SLASH_dom_DOT_js.createCanvasContext2D)(1, 1);
      ctx.fillStyle = "rgba(0,0,0,0)";
      ctx.fillRect(0, 0, 1, 1);
      this.image_ = ctx.canvas;
      this.changed();
    }
    handleImageLoad_() {
      const image = this.image_;
      this.state = image.naturalWidth && image.naturalHeight ? default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED : default$$require$_DOT__SLASH_TileState_DOT_js.default.EMPTY;
      this.unlistenImage_();
      this.changed();
    }
    load() {
      this.state == default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR && (this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE, this.image_ = new Image(), null !== this.crossOrigin_ && (this.image_.crossOrigin = this.crossOrigin_));
      this.state == default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE && (this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADING, this.changed(), this.tileLoadFunction_(this, this.src_), this.unlisten_ = (0,require$_DOT__SLASH_Image_DOT_js.listenImage)(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this)));
    }
    unlistenImage_() {
      this.unlisten_ && (this.unlisten_(), this.unlisten_ = null);
    }
    disposeInternal() {
      this.unlistenImage_();
      this.image_ = null;
      super.disposeInternal();
    }
  }
  const $$default = ImageTile;
};

//# sourceMappingURL=module$node_modules$ol$ImageTile.js.map
