{
"version":3,
"file":"module$node_modules$ol$TileQueue.js",
"lineCount":54,
"mappings":"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",
"sources":["node_modules/ol/TileQueue.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$TileQueue\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}, getTilePriority:{enumerable:true, get:function() {\n  return getTilePriority;\n}}});\nvar require$_DOT__SLASH_TileState_DOT_js = require(\"./TileState.js\");\nvar require$_DOT__SLASH_events_SLASH_EventType_DOT_js = require(\"./events/EventType.js\");\nvar require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js = require(\"./structs/PriorityQueue.js\");\nvar default$$require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js = require.esmDefault(require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js);\nvar default$$require$_DOT__SLASH_TileState_DOT_js = require.esmDefault(require$_DOT__SLASH_TileState_DOT_js);\nvar default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__SLASH_events_SLASH_EventType_DOT_js);\nclass TileQueue extends default$$require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js.default {\n  constructor(tilePriorityFunction, tileChangeCallback) {\n    super(element => tilePriorityFunction.apply(null, element), element => element[0].getKey(),);\n    this.boundHandleTileChange_ = this.handleTileChange.bind(this);\n    this.tileChangeCallback_ = tileChangeCallback;\n    this.tilesLoading_ = 0;\n    this.tilesLoadingKeys_ = {};\n  }\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      tile.addEventListener(default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js.default.CHANGE, this.boundHandleTileChange_);\n    }\n    return added;\n  }\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n  handleTileChange(event) {\n    const tile = event.target;\n    const state = tile.getState();\n    if (state === default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED || state === default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR || state === default$$require$_DOT__SLASH_TileState_DOT_js.default.EMPTY) {\n      if (state !== default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR) {\n        tile.removeEventListener(default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js.default.CHANGE, this.boundHandleTileChange_);\n      }\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads && this.getCount() > 0) {\n      const tile = this.dequeue()[0];\n      const tileKey = tile.getKey();\n      const state = tile.getState();\n      if (state === default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n  }\n}\nconst $$default = TileQueue;\nfunction getTilePriority(frameState, tile, tileSourceKey, tileCenter, tileResolution,) {\n  if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n    return require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js.DROP;\n  }\n  if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n    return require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js.DROP;\n  }\n  const center = frameState.viewState.center;\n  const deltaX = tileCenter[0] - center[0];\n  const deltaY = tileCenter[1] - center[1];\n  return 65536 * Math.log(tileResolution) + Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","getTilePriority","frameState","tile","tileSourceKey","tileCenter","tileResolution","wantedTiles","getKey","require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js","DROP","center","viewState","deltaX","deltaY","Math","log","sqrt","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__SLASH_TileState_DOT_js","require$_DOT__SLASH_events_SLASH_EventType_DOT_js","default$$require$_DOT__SLASH_structs_SLASH_PriorityQueue_DOT_js","esmDefault","default$$require$_DOT__SLASH_TileState_DOT_js","default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js","TileQueue","constructor","tilePriorityFunction","tileChangeCallback","element","apply","boundHandleTileChange_","handleTileChange","bind","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","enqueue","added","addEventListener","CHANGE","getTilesLoading","event","target","state","getState","LOADED","ERROR","EMPTY","removeEventListener","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","getCount","dequeue","IDLE","load"]
}
