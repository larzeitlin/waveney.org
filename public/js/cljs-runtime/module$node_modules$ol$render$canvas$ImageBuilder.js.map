{
"version":3,
"file":"module$node_modules$ol$render$canvas$ImageBuilder.js",
"lineCount":73,
"mappings":"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",
"sources":["node_modules/ol/render/canvas/ImageBuilder.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$render$canvas$ImageBuilder\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_extent_DOT_js = require(\"../../extent.js\");\nvar require$_DOT__SLASH_Builder_DOT_js = require(\"./Builder.js\");\nvar require$_DOT__SLASH_Instruction_DOT_js = require(\"./Instruction.js\");\nvar default$$require$_DOT__SLASH_Instruction_DOT_js = require.esmDefault(require$_DOT__SLASH_Instruction_DOT_js);\nvar default$$require$_DOT__SLASH_Builder_DOT_js = require.esmDefault(require$_DOT__SLASH_Builder_DOT_js);\nclass CanvasImageBuilder extends default$$require$_DOT__SLASH_Builder_DOT_js.default {\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.imagePixelRatio_ = undefined;\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.height_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.scale_ = undefined;\n    this.width_ = undefined;\n    this.declutterMode_ = undefined;\n    this.declutterImageWithText_ = undefined;\n  }\n  drawPoint(pointGeometry, feature, index) {\n    if (!this.image_ || this.maxExtent && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_extent_DOT_js.containsCoordinate)(this.maxExtent, pointGeometry.getFlatCoordinates())) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature, index);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([default$$require$_DOT__SLASH_Instruction_DOT_js.default.DRAW_IMAGE, myBegin, myEnd, this.image_, this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_ * this.imagePixelRatio_, this.originY_ * this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_,], \n    Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_,]);\n    this.hitDetectionInstructions.push([default$$require$_DOT__SLASH_Instruction_DOT_js.default.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, this.anchorX_, this.anchorY_, this.height_, 1, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_,]);\n    this.endGeometry(feature);\n  }\n  drawMultiPoint(multiPointGeometry, feature, index) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature, index);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const filteredFlatCoordinates = [];\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += multiPointGeometry.getStride()) {\n      if (!this.maxExtent || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_extent_DOT_js.containsCoordinate)(this.maxExtent, flatCoordinates.slice(i, i + 2))) {\n        filteredFlatCoordinates.push(flatCoordinates[i], flatCoordinates[i + 1],);\n      }\n    }\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatPointCoordinates(filteredFlatCoordinates, 2);\n    this.instructions.push([default$$require$_DOT__SLASH_Instruction_DOT_js.default.DRAW_IMAGE, myBegin, myEnd, this.image_, this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_ * this.imagePixelRatio_, this.originY_ * this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_,], \n    Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_,]);\n    this.hitDetectionInstructions.push([default$$require$_DOT__SLASH_Instruction_DOT_js.default.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, this.anchorX_, this.anchorY_, this.height_, 1, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_,]);\n    this.endGeometry(feature);\n  }\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.imagePixelRatio_ = undefined;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n    return super.finish();\n  }\n  setImageStyle(imageStyle, sharedData) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const origin = imageStyle.getOrigin();\n    this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.hitDetectionImage_ = imageStyle.getHitDetectionImage();\n    this.image_ = imageStyle.getImage(this.pixelRatio);\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScaleArray();\n    this.width_ = size[0];\n    this.declutterMode_ = imageStyle.getDeclutterMode();\n    this.declutterImageWithText_ = sharedData;\n  }\n}\nconst $$default = CanvasImageBuilder;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_extent_DOT_js","require$_DOT__SLASH_Builder_DOT_js","require$_DOT__SLASH_Instruction_DOT_js","default$$require$_DOT__SLASH_Instruction_DOT_js","esmDefault","default$$require$_DOT__SLASH_Builder_DOT_js","CanvasImageBuilder","constructor","tolerance","maxExtent","resolution","pixelRatio","image_","hitDetectionImage_","declutterImageWithText_","declutterMode_","width_","scale_","rotation_","rotateWithView_","originY_","originX_","opacity_","height_","anchorY_","anchorX_","imagePixelRatio_","undefined","drawPoint","pointGeometry","feature","index","containsCoordinate","getFlatCoordinates","beginGeometry","flatCoordinates","stride","getStride","myBegin","coordinates","length","myEnd","appendFlatPointCoordinates","instructions","push","DRAW_IMAGE","Math","ceil","hitDetectionInstructions","endGeometry","drawMultiPoint","multiPointGeometry","filteredFlatCoordinates","i","ii","slice","finish","reverseHitDetectionInstructions","setImageStyle","imageStyle","sharedData","anchor","getAnchor","size","getSize","origin","getOrigin","getPixelRatio","getHitDetectionImage","getImage","getOpacity","getRotateWithView","getRotation","getScaleArray","getDeclutterMode"]
}
