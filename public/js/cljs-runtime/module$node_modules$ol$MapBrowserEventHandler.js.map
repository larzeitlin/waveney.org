{
"version":3,
"file":"module$node_modules$ol$MapBrowserEventHandler.js",
"lineCount":103,
"mappings":"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",
"sources":["node_modules/ol/MapBrowserEventHandler.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$MapBrowserEventHandler\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}});\nvar require$_DOT__SLASH_MapBrowserEvent_DOT_js = require(\"./MapBrowserEvent.js\");\nvar require$_DOT__SLASH_MapBrowserEventType_DOT_js = require(\"./MapBrowserEventType.js\");\nvar require$_DOT__SLASH_events_SLASH_EventType_DOT_js = require(\"./events/EventType.js\");\nvar require$_DOT__SLASH_events_SLASH_Target_DOT_js = require(\"./events/Target.js\");\nvar require$_DOT__SLASH_events_DOT_js = require(\"./events.js\");\nvar require$_DOT__SLASH_has_DOT_js = require(\"./has.js\");\nvar require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js = require(\"./pointer/EventType.js\");\nvar default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js = require.esmDefault(require$_DOT__SLASH_MapBrowserEventType_DOT_js);\nvar default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js = require.esmDefault(require$_DOT__SLASH_MapBrowserEvent_DOT_js);\nvar default$$require$_DOT__SLASH_events_SLASH_Target_DOT_js = require.esmDefault(require$_DOT__SLASH_events_SLASH_Target_DOT_js);\nvar default$$require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js);\nvar default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__SLASH_events_SLASH_EventType_DOT_js);\nclass MapBrowserEventHandler extends default$$require$_DOT__SLASH_events_SLASH_Target_DOT_js.default {\n  constructor(map, moveTolerance) {\n    super(map);\n    this.map_ = map;\n    this.clickTimeoutId_;\n    this.emulateClicks_ = false;\n    this.dragging_ = false;\n    this.dragListenerKeys_ = [];\n    this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n    this.down_ = null;\n    const element = this.map_.getViewport();\n    this.activePointers_ = [];\n    this.trackedTouches_ = {};\n    this.element_ = element;\n    this.pointerdownListenerKey_ = (0,require$_DOT__SLASH_events_DOT_js.listen)(element, default$$require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js.default.POINTERDOWN, this.handlePointerDown_, this,);\n    this.originalPointerMoveEvent_;\n    this.relayedListenerKey_ = (0,require$_DOT__SLASH_events_DOT_js.listen)(element, default$$require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js.default.POINTERMOVE, this.relayMoveEvent_, this,);\n    this.boundHandleTouchMove_ = this.handleTouchMove_.bind(this);\n    this.element_.addEventListener(default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js.default.TOUCHMOVE, this.boundHandleTouchMove_, require$_DOT__SLASH_has_DOT_js.PASSIVE_EVENT_LISTENERS ? {passive:false} : false,);\n  }\n  emulateClick_(pointerEvent) {\n    let newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.CLICK, this.map_, pointerEvent,);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.DBLCLICK, this.map_, pointerEvent,);\n      this.dispatchEvent(newEvent);\n    } else {\n      this.clickTimeoutId_ = setTimeout(() => {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.SINGLECLICK, this.map_, pointerEvent,);\n        this.dispatchEvent(newEvent);\n      }, 250);\n    }\n  }\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n    const id = event.pointerId;\n    if (event.type == default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERUP || event.type == default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERCANCEL) {\n      delete this.trackedTouches_[id];\n      for (const pointerId in this.trackedTouches_) {\n        if (this.trackedTouches_[pointerId].target !== event.target) {\n          delete this.trackedTouches_[pointerId];\n          break;\n        }\n      }\n    } else if (event.type == default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERDOWN || event.type == default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERMOVE) {\n      this.trackedTouches_[id] = event;\n    }\n    this.activePointers_ = Object.values(this.trackedTouches_);\n  }\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERUP, this.map_, pointerEvent, undefined, undefined, this.activePointers_,);\n    this.dispatchEvent(newEvent);\n    if (this.emulateClicks_ && !newEvent.defaultPrevented && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n    if (this.activePointers_.length === 0) {\n      this.dragListenerKeys_.forEach(require$_DOT__SLASH_events_DOT_js.unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n  handlePointerDown_(pointerEvent) {\n    this.emulateClicks_ = this.activePointers_.length === 0;\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERDOWN, this.map_, pointerEvent, undefined, undefined, this.activePointers_,);\n    this.dispatchEvent(newEvent);\n    this.down_ = new PointerEvent(pointerEvent.type, pointerEvent);\n    Object.defineProperty(this.down_, \"target\", {writable:false, value:pointerEvent.target,});\n    if (this.dragListenerKeys_.length === 0) {\n      const doc = this.map_.getOwnerDocument();\n      this.dragListenerKeys_.push((0,require$_DOT__SLASH_events_DOT_js.listen)(doc, default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERMOVE, this.handlePointerMove_, this,), (0,require$_DOT__SLASH_events_DOT_js.listen)(doc, default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERUP, this.handlePointerUp_, this), (0,require$_DOT__SLASH_events_DOT_js.listen)(this.element_, default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERCANCEL, this.handlePointerUp_, \n      this,),);\n      if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n        this.dragListenerKeys_.push((0,require$_DOT__SLASH_events_DOT_js.listen)(this.element_.getRootNode(), default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERUP, this.handlePointerUp_, this,),);\n      }\n    }\n  }\n  handlePointerMove_(pointerEvent) {\n    if (this.isMoving_(pointerEvent)) {\n      this.updateActivePointers_(pointerEvent);\n      this.dragging_ = true;\n      const newEvent = new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERDRAG, this.map_, pointerEvent, this.dragging_, undefined, this.activePointers_,);\n      this.dispatchEvent(newEvent);\n    }\n  }\n  relayMoveEvent_(pointerEvent) {\n    this.originalPointerMoveEvent_ = pointerEvent;\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js.default(default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js.default.POINTERMOVE, this.map_, pointerEvent, dragging,),);\n  }\n  handleTouchMove_(event) {\n    const originalEvent = this.originalPointerMoveEvent_;\n    if ((!originalEvent || originalEvent.defaultPrevented) && (typeof event.cancelable !== \"boolean\" || event.cancelable === true)) {\n      event.preventDefault();\n    }\n  }\n  isMoving_(pointerEvent) {\n    return this.dragging_ || Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ || Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  }\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      (0,require$_DOT__SLASH_events_DOT_js.unlistenByKey)(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    this.element_.removeEventListener(default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js.default.TOUCHMOVE, this.boundHandleTouchMove_,);\n    if (this.pointerdownListenerKey_) {\n      (0,require$_DOT__SLASH_events_DOT_js.unlistenByKey)(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n    this.dragListenerKeys_.forEach(require$_DOT__SLASH_events_DOT_js.unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\nconst $$default = MapBrowserEventHandler;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__SLASH_MapBrowserEvent_DOT_js","require$_DOT__SLASH_MapBrowserEventType_DOT_js","require$_DOT__SLASH_events_SLASH_EventType_DOT_js","require$_DOT__SLASH_events_SLASH_Target_DOT_js","require$_DOT__SLASH_events_DOT_js","require$_DOT__SLASH_has_DOT_js","require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js","default$$require$_DOT__SLASH_MapBrowserEventType_DOT_js","esmDefault","default$$require$_DOT__SLASH_MapBrowserEvent_DOT_js","default$$require$_DOT__SLASH_events_SLASH_Target_DOT_js","default$$require$_DOT__SLASH_pointer_SLASH_EventType_DOT_js","default$$require$_DOT__SLASH_events_SLASH_EventType_DOT_js","MapBrowserEventHandler","constructor","map","moveTolerance","map_","clickTimeoutId_","dragging_","emulateClicks_","dragListenerKeys_","moveTolerance_","undefined","down_","element","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","listen","POINTERDOWN","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","POINTERMOVE","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","bind","addEventListener","TOUCHMOVE","PASSIVE_EVENT_LISTENERS","passive","emulateClick_","pointerEvent","newEvent","CLICK","dispatchEvent","clearTimeout","DBLCLICK","setTimeout","SINGLECLICK","updateActivePointers_","id","pointerId","type","POINTERUP","POINTERCANCEL","target","values","handlePointerUp_","defaultPrevented","isMouseActionButton_","length","forEach","unlistenByKey","button","PointerEvent","defineProperty","writable","doc","getOwnerDocument","push","handlePointerMove_","getRootNode","isMoving_","POINTERDRAG","dragging","event","originalEvent","cancelable","preventDefault","Math","abs","clientX","clientY","disposeInternal","removeEventListener"]
}
