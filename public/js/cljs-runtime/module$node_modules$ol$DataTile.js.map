{
"version":3,
"file":"module$node_modules$ol$DataTile.js",
"lineCount":80,
"mappings":"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",
"sources":["node_modules/ol/DataTile.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$DataTile\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, asArrayLike:{enumerable:true, get:function() {\n  return asArrayLike;\n}}, asImageLike:{enumerable:true, get:function() {\n  return asImageLike;\n}}, default:{enumerable:true, get:function() {\n  return $$default;\n}}, disposedError:{enumerable:true, get:function() {\n  return disposedError;\n}}, toArray:{enumerable:true, get:function() {\n  return toArray;\n}}});\nvar require$_DOT__SLASH_Tile_DOT_js = require(\"./Tile.js\");\nvar require$_DOT__SLASH_TileState_DOT_js = require(\"./TileState.js\");\nvar require$_DOT__SLASH_dom_DOT_js = require(\"./dom.js\");\nvar default$$require$_DOT__SLASH_TileState_DOT_js = require.esmDefault(require$_DOT__SLASH_TileState_DOT_js);\nvar default$$require$_DOT__SLASH_Tile_DOT_js = require.esmDefault(require$_DOT__SLASH_Tile_DOT_js);\nfunction asImageLike(data) {\n  return data instanceof Image || data instanceof HTMLCanvasElement || data instanceof HTMLVideoElement || data instanceof ImageBitmap ? data : null;\n}\nfunction asArrayLike(data) {\n  return data instanceof Uint8Array || data instanceof Uint8ClampedArray || data instanceof Float32Array || data instanceof DataView ? data : null;\n}\nconst disposedError = new Error(\"disposed\");\nlet sharedContext = null;\nfunction toArray(image) {\n  if (!sharedContext) {\n    sharedContext = (0,require$_DOT__SLASH_dom_DOT_js.createCanvasContext2D)(image.width, image.height, undefined, {willReadFrequently:true},);\n  }\n  const canvas = sharedContext.canvas;\n  const width = image.width;\n  if (canvas.width !== width) {\n    canvas.width = width;\n  }\n  const height = image.height;\n  if (canvas.height !== height) {\n    canvas.height = height;\n  }\n  sharedContext.clearRect(0, 0, width, height);\n  sharedContext.drawImage(image, 0, 0);\n  return sharedContext.getImageData(0, 0, width, height).data;\n}\nconst defaultSize = [256, 256];\nclass DataTile extends default$$require$_DOT__SLASH_Tile_DOT_js.default {\n  constructor(options) {\n    const state = default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE;\n    super(options.tileCoord, state, {transition:options.transition, interpolate:options.interpolate,});\n    this.loader_ = options.loader;\n    this.data_ = null;\n    this.error_ = null;\n    this.size_ = options.size || null;\n    this.controller_ = options.controller || null;\n  }\n  getSize() {\n    if (this.size_) {\n      return this.size_;\n    }\n    const imageData = asImageLike(this.data_);\n    if (imageData) {\n      return [imageData.width, imageData.height];\n    }\n    return defaultSize;\n  }\n  getData() {\n    return this.data_;\n  }\n  getError() {\n    return this.error_;\n  }\n  load() {\n    if (this.state !== default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE && this.state !== default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR) {\n      return;\n    }\n    this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADING;\n    this.changed();\n    const self = this;\n    this.loader_().then(function(data) {\n      self.data_ = data;\n      self.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED;\n      self.changed();\n    }).catch(function(error) {\n      self.error_ = error;\n      self.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR;\n      self.changed();\n    });\n  }\n  disposeInternal() {\n    if (this.controller_) {\n      this.controller_.abort(disposedError);\n      this.controller_ = null;\n    }\n    super.disposeInternal();\n  }\n}\nconst $$default = DataTile;\n\n};"],
"names":["shadow$provide","global","require","module","exports","asImageLike","data","Image","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","asArrayLike","Uint8Array","Uint8ClampedArray","Float32Array","DataView","toArray","image","sharedContext","require$_DOT__SLASH_dom_DOT_js","createCanvasContext2D","width","height","undefined","willReadFrequently","canvas","clearRect","drawImage","getImageData","Object","defineProperties","__esModule","enumerable","value","get","default","$$default","disposedError","require$_DOT__SLASH_Tile_DOT_js","require$_DOT__SLASH_TileState_DOT_js","default$$require$_DOT__SLASH_TileState_DOT_js","esmDefault","default$$require$_DOT__SLASH_Tile_DOT_js","Error","defaultSize","DataTile","constructor","options","tileCoord","IDLE","transition","interpolate","loader_","loader","error_","data_","size_","size","controller_","controller","getSize","imageData","getData","getError","load","state","ERROR","LOADING","changed","self","then","LOADED","catch","error","disposeInternal","abort"]
}
