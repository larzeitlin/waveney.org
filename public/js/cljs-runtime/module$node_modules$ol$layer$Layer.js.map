{
"version":3,
"file":"module$node_modules$ol$layer$Layer.js",
"lineCount":166,
"mappings":"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",
"sources":["node_modules/ol/layer/Layer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$layer$Layer\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}, inView:{enumerable:true, get:function() {\n  return inView;\n}}});\nvar require$_DOT__DOT__SLASH_View_DOT_js = require(\"../View.js\");\nvar require$_DOT__DOT__SLASH_asserts_DOT_js = require(\"../asserts.js\");\nvar require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js = require(\"../events/EventType.js\");\nvar require$_DOT__DOT__SLASH_events_DOT_js = require(\"../events.js\");\nvar require$_DOT__DOT__SLASH_extent_DOT_js = require(\"../extent.js\");\nvar require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js = require(\"../render/EventType.js\");\nvar require$_DOT__SLASH_Base_DOT_js = require(\"./Base.js\");\nvar require$_DOT__SLASH_Property_DOT_js = require(\"./Property.js\");\nvar default$$require$_DOT__SLASH_Base_DOT_js = require.esmDefault(require$_DOT__SLASH_Base_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_View_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_View_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js);\nvar default$$require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js);\nvar default$$require$_DOT__SLASH_Property_DOT_js = require.esmDefault(require$_DOT__SLASH_Property_DOT_js);\nclass Layer extends default$$require$_DOT__SLASH_Base_DOT_js.default {\n  constructor(options) {\n    const baseOptions = Object.assign({}, options);\n    delete baseOptions.source;\n    super(baseOptions);\n    this.on;\n    this.once;\n    this.un;\n    this.mapPrecomposeKey_ = null;\n    this.mapRenderKey_ = null;\n    this.sourceChangeKey_ = null;\n    this.renderer_ = null;\n    this.sourceReady_ = false;\n    this.rendered = false;\n    if (options.render) {\n      this.render = options.render;\n    }\n    if (options.map) {\n      this.setMap(options.map);\n    }\n    this.addChangeListener(default$$require$_DOT__SLASH_Property_DOT_js.default.SOURCE, this.handleSourcePropertyChange_,);\n    const source = options.source ? options.source : null;\n    this.setSource(source);\n  }\n  getLayersArray(array) {\n    array = array ? array : [];\n    array.push(this);\n    return array;\n  }\n  getLayerStatesArray(states) {\n    states = states ? states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n  getSource() {\n    return this.get(default$$require$_DOT__SLASH_Property_DOT_js.default.SOURCE) || null;\n  }\n  getRenderSource() {\n    return this.getSource();\n  }\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? \"undefined\" : source.getState();\n  }\n  handleSourceChange_() {\n    this.changed();\n    if (this.sourceReady_ || this.getSource().getState() !== \"ready\") {\n      return;\n    }\n    this.sourceReady_ = true;\n    this.dispatchEvent(\"sourceready\");\n  }\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      (0,require$_DOT__DOT__SLASH_events_DOT_js.unlistenByKey)(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    this.sourceReady_ = false;\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = (0,require$_DOT__DOT__SLASH_events_DOT_js.listen)(source, default$$require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js.default.CHANGE, this.handleSourceChange_, this,);\n      if (source.getState() === \"ready\") {\n        this.sourceReady_ = true;\n        setTimeout(() => {\n          this.dispatchEvent(\"sourceready\");\n        }, 0);\n      }\n      this.clearRenderer();\n    }\n    this.changed();\n  }\n  getFeatures(pixel) {\n    if (!this.renderer_) {\n      return Promise.resolve([]);\n    }\n    return this.renderer_.getFeatures(pixel);\n  }\n  getData(pixel) {\n    if (!this.renderer_ || !this.rendered) {\n      return null;\n    }\n    return this.renderer_.getData(pixel);\n  }\n  isVisible(view) {\n    let frameState;\n    const map = this.getMapInternal();\n    if (!view && map) {\n      view = map.getView();\n    }\n    if (view instanceof default$$require$_DOT__DOT__SLASH_View_DOT_js.default) {\n      frameState = {viewState:view.getState(), extent:view.calculateExtent(),};\n    } else {\n      frameState = view;\n    }\n    if (!frameState.layerStatesArray && map) {\n      frameState.layerStatesArray = map.getLayerGroup().getLayerStatesArray();\n    }\n    let layerState;\n    if (frameState.layerStatesArray) {\n      layerState = frameState.layerStatesArray.find(layerState => layerState.layer === this,);\n      if (!layerState) {\n        return false;\n      }\n    } else {\n      layerState = this.getLayerState();\n    }\n    const layerExtent = this.getExtent();\n    return inView(layerState, frameState.viewState) && (!layerExtent || (0,require$_DOT__DOT__SLASH_extent_DOT_js.intersects)(layerExtent, frameState.extent));\n  }\n  getAttributions(view) {\n    if (!this.isVisible(view)) {\n      return [];\n    }\n    const getAttributions = this.getSource()?.getAttributions();\n    if (!getAttributions) {\n      return [];\n    }\n    const frameState = view instanceof default$$require$_DOT__DOT__SLASH_View_DOT_js.default ? view.getViewStateAndExtent() : view;\n    let attributions = getAttributions(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n    return attributions;\n  }\n  render(frameState, target) {\n    const layerRenderer = this.getRenderer();\n    if (layerRenderer.prepareFrame(frameState)) {\n      this.rendered = true;\n      return layerRenderer.renderFrame(frameState, target);\n    }\n    return null;\n  }\n  unrender() {\n    this.rendered = false;\n  }\n  getDeclutter() {\n    return undefined;\n  }\n  renderDeclutter(frameState, layerState) {\n  }\n  renderDeferred(frameState) {\n    const layerRenderer = this.getRenderer();\n    if (!layerRenderer) {\n      return;\n    }\n    layerRenderer.renderDeferred(frameState);\n  }\n  setMapInternal(map) {\n    if (!map) {\n      this.unrender();\n    }\n    this.set(default$$require$_DOT__SLASH_Property_DOT_js.default.MAP, map);\n  }\n  getMapInternal() {\n    return this.get(default$$require$_DOT__SLASH_Property_DOT_js.default.MAP);\n  }\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      (0,require$_DOT__DOT__SLASH_events_DOT_js.unlistenByKey)(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      (0,require$_DOT__DOT__SLASH_events_DOT_js.unlistenByKey)(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = (0,require$_DOT__DOT__SLASH_events_DOT_js.listen)(map, default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js.default.PRECOMPOSE, this.handlePrecompose_, this,);\n      this.mapRenderKey_ = (0,require$_DOT__DOT__SLASH_events_DOT_js.listen)(this, default$$require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js.default.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n  handlePrecompose_(renderEvent) {\n    const layerStatesArray = renderEvent.frameState.layerStatesArray;\n    const layerState = this.getLayerState(false);\n    (0,require$_DOT__DOT__SLASH_asserts_DOT_js.assert)(!layerStatesArray.some(arrayLayerState => arrayLayerState.layer === layerState.layer,), \"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\",);\n    layerStatesArray.push(layerState);\n  }\n  setSource(source) {\n    this.set(default$$require$_DOT__SLASH_Property_DOT_js.default.SOURCE, source);\n  }\n  getRenderer() {\n    if (!this.renderer_) {\n      this.renderer_ = this.createRenderer();\n    }\n    return this.renderer_;\n  }\n  hasRenderer() {\n    return !!this.renderer_;\n  }\n  createRenderer() {\n    return null;\n  }\n  clearRenderer() {\n    if (this.renderer_) {\n      this.renderer_.dispose();\n      delete this.renderer_;\n    }\n  }\n  disposeInternal() {\n    this.clearRenderer();\n    this.setSource(null);\n    super.disposeInternal();\n  }\n}\nfunction inView(layerState, viewState) {\n  if (!layerState.visible) {\n    return false;\n  }\n  const resolution = viewState.resolution;\n  if (resolution < layerState.minResolution || resolution >= layerState.maxResolution) {\n    return false;\n  }\n  const zoom = viewState.zoom;\n  return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nconst $$default = Layer;\n\n};"],
"names":["shadow$provide","global","require","module","exports","inView","layerState","viewState","visible","resolution","minResolution","maxResolution","zoom","minZoom","maxZoom","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__DOT__SLASH_View_DOT_js","require$_DOT__DOT__SLASH_asserts_DOT_js","require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js","require$_DOT__DOT__SLASH_events_DOT_js","require$_DOT__DOT__SLASH_extent_DOT_js","require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js","require$_DOT__SLASH_Base_DOT_js","require$_DOT__SLASH_Property_DOT_js","default$$require$_DOT__SLASH_Base_DOT_js","esmDefault","default$$require$_DOT__DOT__SLASH_View_DOT_js","default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js","default$$require$_DOT__DOT__SLASH_events_SLASH_EventType_DOT_js","default$$require$_DOT__SLASH_Property_DOT_js","Layer","constructor","options","baseOptions","assign","source","on","once","un","renderer_","sourceChangeKey_","mapRenderKey_","mapPrecomposeKey_","rendered","sourceReady_","render","map","setMap","addChangeListener","SOURCE","handleSourcePropertyChange_","setSource","getLayersArray","array","push","getLayerStatesArray","states","getLayerState","getSource","getRenderSource","getSourceState","getState","handleSourceChange_","changed","dispatchEvent","unlistenByKey","listen","CHANGE","setTimeout","clearRenderer","getFeatures","pixel","Promise","resolve","getData","isVisible","view","getMapInternal","getView","frameState","extent","calculateExtent","layerStatesArray","getLayerGroup","find","layer","layerExtent","getExtent","intersects","getAttributions","getViewStateAndExtent","attributions","Array","isArray","target","layerRenderer","getRenderer","prepareFrame","renderFrame","unrender","getDeclutter","renderDeclutter","renderDeferred","setMapInternal","set","MAP","PRECOMPOSE","handlePrecompose_","renderEvent","assert","some","arrayLayerState","createRenderer","hasRenderer","dispose","disposeInternal"]
}
