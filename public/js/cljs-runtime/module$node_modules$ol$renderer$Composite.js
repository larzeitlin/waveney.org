shadow$provide.module$node_modules$ol$renderer$Composite = function(global, require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, default:{enumerable:!0, get:function() {
    return $$default;
  }}});
  var require$_DOT__DOT__SLASH_ObjectEventType_DOT_js = require("module$node_modules$ol$ObjectEventType"), require$_DOT__DOT__SLASH_css_DOT_js = require("module$node_modules$ol$css"), require$_DOT__DOT__SLASH_dom_DOT_js = require("module$node_modules$ol$dom"), require$_DOT__DOT__SLASH_events_DOT_js = require("module$node_modules$ol$events");
  global = require("module$node_modules$ol$layer$BaseVector");
  var require$_DOT__DOT__SLASH_layer_SLASH_Layer_DOT_js = require("module$node_modules$ol$layer$Layer");
  module = require("module$node_modules$ol$render$Event");
  exports = require("module$node_modules$ol$render$EventType");
  var require$_DOT__DOT__SLASH_render_SLASH_canvas_DOT_js = require("module$node_modules$ol$render$canvas"), require$_DOT__SLASH_Map_DOT_js = require("module$node_modules$ol$renderer$Map"), default$$require$_DOT__DOT__SLASH_ObjectEventType_DOT_js = require.esmDefault(require$_DOT__DOT__SLASH_ObjectEventType_DOT_js);
  require$_DOT__DOT__SLASH_ObjectEventType_DOT_js = require.esmDefault(require$_DOT__SLASH_Map_DOT_js);
  var default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js = require.esmDefault(exports), default$$require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js = require.esmDefault(module), default$$require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js = require.esmDefault(global);
  class CompositeMapRenderer extends require$_DOT__DOT__SLASH_ObjectEventType_DOT_js.default {
    constructor(map) {
      super(map);
      this.fontChangeListenerKey_ = (0,require$_DOT__DOT__SLASH_events_DOT_js.listen)(require$_DOT__DOT__SLASH_render_SLASH_canvas_DOT_js.checkedFonts, default$$require$_DOT__DOT__SLASH_ObjectEventType_DOT_js.default.PROPERTYCHANGE, map.redrawText, map);
      this.element_ = document.createElement("div");
      const style = this.element_.style;
      style.position = "absolute";
      style.width = "100%";
      style.height = "100%";
      style.zIndex = "0";
      this.element_.className = require$_DOT__DOT__SLASH_css_DOT_js.CLASS_UNSELECTABLE + " ol-layers";
      map = map.getViewport();
      map.insertBefore(this.element_, map.firstChild || null);
      this.children_ = [];
      this.renderedVisible_ = !0;
    }
    dispatchRenderEvent(type, frameState) {
      const map = this.getMap();
      map.hasListener(type) && (type = new default$$require$_DOT__DOT__SLASH_render_SLASH_Event_DOT_js.default(type, void 0, frameState), map.dispatchEvent(type));
    }
    disposeInternal() {
      (0,require$_DOT__DOT__SLASH_events_DOT_js.unlistenByKey)(this.fontChangeListenerKey_);
      this.element_.remove();
      super.disposeInternal();
    }
    renderFrame(frameState) {
      if (frameState) {
        this.calculateMatrices2D(frameState);
        this.dispatchRenderEvent(default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js.default.PRECOMPOSE, frameState);
        var layerStatesArray = frameState.layerStatesArray.sort((a, b) => a.zIndex - b.zIndex);
        layerStatesArray.some(layerState => layerState.layer instanceof default$$require$_DOT__DOT__SLASH_layer_SLASH_BaseVector_DOT_js.default && layerState.layer.getDeclutter()) && (frameState.declutter = {});
        var viewState = frameState.viewState;
        this.children_.length = 0;
        var renderedLayerStates = [], previousElement = null;
        for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {
          const layerState = layerStatesArray[i];
          frameState.layerIndex = i;
          var layer = layerState.layer;
          const sourceState = layer.getSourceState();
          if (!(0,require$_DOT__DOT__SLASH_layer_SLASH_Layer_DOT_js.inView)(layerState, viewState) || "ready" != sourceState && "undefined" != sourceState) {
            layer.unrender();
          } else {
            if (layer = layer.render(frameState, previousElement)) {
              layer !== previousElement && (this.children_.push(layer), previousElement = layer), renderedLayerStates.push(layerState);
            }
          }
        }
        this.declutter(frameState, renderedLayerStates);
        (0,require$_DOT__DOT__SLASH_dom_DOT_js.replaceChildren)(this.element_, this.children_);
        this.dispatchRenderEvent(default$$require$_DOT__DOT__SLASH_render_SLASH_EventType_DOT_js.default.POSTCOMPOSE, frameState);
        this.renderedVisible_ || (this.element_.style.display = "", this.renderedVisible_ = !0);
        this.scheduleExpireIconCache(frameState);
      } else {
        this.renderedVisible_ && (this.element_.style.display = "none", this.renderedVisible_ = !1);
      }
    }
    declutter(frameState, layerStates) {
      if (frameState.declutter) {
        for (let i = layerStates.length - 1; 0 <= i; --i) {
          const layerState = layerStates[i], layer = layerState.layer;
          layer.getDeclutter() && layer.renderDeclutter(frameState, layerState);
        }
        layerStates.forEach(layerState => layerState.layer.renderDeferred(frameState));
      }
    }
  }
  const $$default = CompositeMapRenderer;
};

//# sourceMappingURL=module$node_modules$ol$renderer$Composite.js.map
