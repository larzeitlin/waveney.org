{
"version":3,
"file":"module$node_modules$ol$ImageTile.js",
"lineCount":59,
"mappings":"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",
"sources":["node_modules/ol/ImageTile.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ol$ImageTile\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return $$default;\n}}});\nvar require$_DOT__SLASH_Image_DOT_js = require(\"./Image.js\");\nvar require$_DOT__SLASH_Tile_DOT_js = require(\"./Tile.js\");\nvar require$_DOT__SLASH_TileState_DOT_js = require(\"./TileState.js\");\nvar require$_DOT__SLASH_dom_DOT_js = require(\"./dom.js\");\nvar default$$require$_DOT__SLASH_TileState_DOT_js = require.esmDefault(require$_DOT__SLASH_TileState_DOT_js);\nvar default$$require$_DOT__SLASH_Tile_DOT_js = require.esmDefault(require$_DOT__SLASH_Tile_DOT_js);\nclass ImageTile extends default$$require$_DOT__SLASH_Tile_DOT_js.default {\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {\n    super(tileCoord, state, options);\n    this.crossOrigin_ = crossOrigin;\n    this.src_ = src;\n    this.key = src;\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n    this.unlisten_ = null;\n    this.tileLoadFunction_ = tileLoadFunction;\n  }\n  getImage() {\n    return this.image_;\n  }\n  setImage(element) {\n    this.image_ = element;\n    this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n  handleImageError_() {\n    this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n  handleImageLoad_() {\n    const image = this.image_;\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADED;\n    } else {\n      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n  load() {\n    if (this.state == default$$require$_DOT__SLASH_TileState_DOT_js.default.ERROR) {\n      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == default$$require$_DOT__SLASH_TileState_DOT_js.default.IDLE) {\n      this.state = default$$require$_DOT__SLASH_TileState_DOT_js.default.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = (0,require$_DOT__SLASH_Image_DOT_js.listenImage)(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this),);\n    }\n  }\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n  disposeInternal() {\n    this.unlistenImage_();\n    this.image_ = null;\n    super.disposeInternal();\n  }\n}\nfunction getBlankImage() {\n  const ctx = (0,require$_DOT__SLASH_dom_DOT_js.createCanvasContext2D)(1, 1);\n  ctx.fillStyle = \"rgba(0,0,0,0)\";\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\nconst $$default = ImageTile;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","$$default","require$_DOT__SLASH_Image_DOT_js","require$_DOT__SLASH_Tile_DOT_js","require$_DOT__SLASH_TileState_DOT_js","require$_DOT__SLASH_dom_DOT_js","default$$require$_DOT__SLASH_TileState_DOT_js","esmDefault","default$$require$_DOT__SLASH_Tile_DOT_js","ImageTile","constructor","tileCoord","state","src","crossOrigin","tileLoadFunction","options","crossOrigin_","key","src_","image_","Image","unlisten_","tileLoadFunction_","getImage","setImage","element","LOADED","unlistenImage_","changed","handleImageError_","ERROR","ctx","createCanvasContext2D","fillStyle","fillRect","canvas","handleImageLoad_","image","naturalWidth","naturalHeight","EMPTY","load","IDLE","LOADING","listenImage","bind","disposeInternal"]
}
